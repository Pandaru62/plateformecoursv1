{% extends 'base.html.twig' %}

{% block title %}PlateformeCours - Voir Séance{% endblock %}

{% block body %}

<section class="mt-3 bg-light rounded-4 p-3">
    <div class="row">
        <div class="col-9">
            <h1>Séquence {{sequence.numero}}</h1>
            <h2>{{sequence.titre}}</h2>
            <p>Description Séq : {{sequence.description}}</p>
        </div>
        <div class="col-3">
            <img class="img-fluid rounded-5" src="{{ asset(sequence.image) }}" alt="">
        </div>
    </div>
</section>

<section>
    <ul class="nav nav-tabs mt-3">
        <li class="nav-item">
            <a class="nav-link disabled" aria-disabled="true">Accéder aux autres séances :</a>
        </li>
        {% for eachseance in allSeances %}
        <li class="nav-item">
            <a class="nav-link {{ seance.numero == eachseance.numero ? 'active' : '' }}" href="/seance/{{eachseance.id}}">
            {% if eachseance.numero == 1000 %}
                Projet
            {% elseif eachseance.numero == 1001 %}
                Grammaire
            {% else %}
                Séance {{eachseance.numero}}
            {% endif %}
            </a>
        
        </li>
        {% endfor %}
    </ul>
</section>

<section class="d-lg-flex align-items-center justify-content-between mt-3">
    <div>
        <h2>
            {% if seance.numero != 1000 and seance.numero != 1001 %}
            Séance {{seance.numero}} : {{ seance.titre }}
            {% else %}
            {{seance.titre}}
            {% endif %}
        </h2>
    </div>
    {% if is_granted('ROLE_ADMIN') %}
    <div class="d-flex align-items-between justify-content-between">
        <a href="/editseance/{{seance.id}}" class="btn btn-success btn-lg me-2"><i class="bi bi-pencil"></i> Editer</a>
            {% if seance.numero != 1000 and seance.numero != 1001 %}
            <a href="/delete/seance/{{seance.id}}" class="btn btn-danger btn-lg me-2"><i class="bi bi-trash"></i> Supprimer</a>
            {% endif %}
        <a href="/newdocument/{{seance.id}}" class="btn btn-primary btn-lg"><i class="bi bi-plus-circle"></i> Ajouter un document</a>
    </div>
    {% endif %}
</section>
    <p>{{seance.description}}</p>

<section class="mt-3">
    {% for doc in docs %}
    <div class="bg-secondary bg-opacity-50 rounded-3 d-flex seance-doc mb-3">
        {% if is_granted('ROLE_ADMIN') %}
        <div class="ps-2 d-flex flex-column justify-content-around align-items-center">
            {% if doc.docOrder != 1 %}
            <a href="/documentup/{{doc.id}}" class="fs-3 docOrderArrow"><i class="bi bi-caret-up-fill"></i></a>
            {% endif %}
            {% if doc.docOrder != lastDocumentOrder %}
            <a href="/documentdown/{{doc.id}}" class="docOrderArrow fs-3"><i class="bi bi-caret-down-fill"></i></a>
            {% endif %}
        </div>
        {% endif %}
        <div class="fs-1 ms-4 d-flex align-items-center justify-content-center">
            <i class="bi bi-{{doc.type}}"></i>
        </div>
        <div class="ms-4 pt-2">
            <h4>{{doc.titre}}</h4>
            <p>{{doc.description}}</p>
        </div>
        <div class="d-flex align-self-center justify-content-center align-items-center ms-auto p-3 fs-1">
                <a class="btn btn-light d-flex justify-content-center align-items-center download-button" 
               href="{{ asset(doc.path) }}" 
               target="_blank">
               {% if doc.type == 'camera-video' %}
                    <i class="bi bi-play-circle"></i>
                    <span class="download-text">Visionner</span>
                {% elseif doc.type == 'link-45deg' %}
                    <i class="bi bi-arrow-right-circle"></i>
                    <span class="download-text">Visiter</span>
               {% else %}
                    <i class="bi bi-download"></i> 
                    <span class="download-text">Télécharger</span>
                {% endif %}
               
            </a>
            <div class="dropdown show-docs">
                <i class="bi bi-three-dots-vertical dropdown-toggle" style="cursor: pointer;"></i>
                <ul class="dropdown-menu" id="dropdownMenu">
                    <li><a class="dropdown-item" href="/editdocument/{{doc.id}}">Editer</a></li>
                    <li><a class="dropdown-item" href="/archivedocument/{{doc.id}}">Archiver</a></li>
                </ul>
            </div>
            
        </div>
    </div>
    {% endfor %}
</section>

<section class="my-3" id="show-seance">

</section>



{% endblock %}
